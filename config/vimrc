" Plugins {{{
call plug#begin('~/.vim/plugged')
Plug 'Align'
Plug 'flazz/vim-colorschemes'
Plug 'xolox/vim-misc'
Plug 'majutsushi/tagbar'
Plug 'taglist.vim'
Plug 'scrooloose/nerdtree'
Plug 'scrooloose/syntastic'
Plug 'scrooloose/nerdcommenter'
Plug 'SirVer/ultisnips'
Plug 'Valloric/YouCompleteMe'
Plug 'bling/vim-airline'
Plug 'bronson/vim-trailing-whitespace'
Plug 'ctrlpvim/ctrlp.vim'
Plug 'honza/vim-snippets'
Plug 'tpope/vim-fugitive'
Plug 'tpope/vim-unimpaired'
Plug 'tpope/vim-sensible'
Plug 'rdnetto/YCM-Generator'
Plug 'pangloss/vim-javascript'
Plug 'airblade/vim-gitgutter'
Plug 'rking/ag.vim'
Plug 'rhysd/vim-clang-format'
Plug 'lervag/vimtex'
call plug#end()
"}}}

" Plugin Configuration {{{
filetype plugin indent on
set runtimepath+=~/workspaces/dotfiles
let g:DropboxPath="/data/Dropbox"
let g:UltiSnipsExpandTrigger="<c-j>"
let g:UltiSnipsJumpForwardTrigger="<c-j>"
let g:UltiSnipsJumpBackwardTrigger="<c-k>"
let g:UltiSnipsListSnippets="<c-l>"
let g:UltiSnipsEditSplit="vertical"
let g:UltiSnipsSnippetsDir="~/workspaces/dotfiles/vimsnippets"
let g:UltiSnipsSnippetDirectories=["vimsnippets"]
let g:ycm_key_list_previous_completion=['<Up>']
let g:ycm_autoclose_preview_window_after_completion = 1
let g:airline_powerline_fonts = 0
let g:airline_left_sep=''
let g:airline_right_sep=''
let g:ctrlp_cmd = 'CtrlPLastMode'
let g:ctrlp_extensions = ['buffertag', 'tag', 'line', 'dir']
let g:ctrlp_max_files=20000
let g:syntastic_cpp_compiler_options = ' -std=c++11 -stdlib=libc++'
set tags=./tags;
let g:Tlist_Auto_Update = 1
let g:easytags_dynamic_files = 1
let g:vimtex_toc_enabled = 1
let g:vimtex_view_method = "zathura"
let g:vimtex_fold_enabled = 1
"}}}

set wildignore=*/.git/*,*/.hg/*,*/.svn/*,*/build/*,*.o,*.class,*/lib-build/*

" Auto commands {{{
au BufRead,BufNewFile *.maxj setfiletype java
au BufRead,BufNewFile *.md setlocal spell spelllang=en_gb

autocmd BufWritePre * :FixWhitespace
autocmd BufNewFile,BufRead *.md setlocal filetype=markdown
autocmd BufRead .vimrc setlocal foldmethod=marker
"}}}
" UI {{{
set expandtab
set tabstop=2
set shiftwidth=2
set smarttab
set t_Co=256
set incsearch
set smartcase
set showcmd
set cursorline
set nobackup
set nowritebackup
set noswapfile
set relativenumber
set cursorline
set shell=bash
set lazyredraw
syntax on
colorscheme Tomorrow
set completeopt=menu
"}}}

" Key Bindings {{{
" Remap leader to <space>
let mapleader=" "
let maplocalleader=" "

" Code search
nnoremap <F2> :CtrlPTag<CR>
nnoremap gr :grep -I <cword> * --exclude-dir="build" -r<CR>:cw<CR>

" Window Navigation
nnoremap <C-J> <C-W><C-J>
nnoremap <C-K> <C-W><C-K>
nnoremap <C-L> <C-W><C-L>
nnoremap <C-H> <C-W><C-H>

nnoremap <leader>ev :vsplit $MYVIMRC<cr>
nnoremap <leader>sv :source $MYVIMRC<cr>:q<cr>
nnoremap <F5> :!<up><cr>
nnoremap <F6> :make <up><cr>
nnoremap <F4> :source %<cr>
nnoremap qq :%s/\<<C-r><C-w>\>//gc<Left><Left><Left>
nnoremap H ^
nnoremap L $
inoremap jk <esc>
inoremap jj <esc>:w<cr>

" TODO only needed in tex files
nnoremap <localleader>lt :<c-u>Unite vimtex_toc<cr>
nnoremap <localleader>ly :<c-u>Unite vimtex_labels<cr>
nnoremap <localleader>bb :b#<cr>
"}}}
